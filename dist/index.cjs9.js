"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const h=require("./index.cjs23.js"),l=require("react"),K=require("./index.cjs19.js"),$=require("./index.cjs25.js"),I=({className:F,width:s=300,height:a=150,brushSize:_=20,coverImage:g,coverColor:p,revealImage:w,revealContent:B,completionThreshold:D=70,onComplete:x,disabled:E=!1,revealAll:R=!1,theme:G,variant:v="default",...J})=>{const{themeObject:Q,theme:U}=K.useTheme(),i=G||U,k=l.useRef(null),V=l.useRef(null),y=l.useRef(!1),[C,L]=l.useState(!1),[M,P]=l.useState(0),[O,q]=l.useState(null),[r,W]=l.useState(null),j=()=>{const t={background:"#f5f5f5",foreground:"#333333",borderColor:"#e0e0e0",shadow:"0 4px 6px rgba(0, 0, 0, 0.1)",brushColor:"rgba(255, 255, 255, 0)"};switch(i){case"enterprise":return{background:p||"#f8f9fa",foreground:"#111827",borderColor:"#e5e7eb",shadow:"0 4px 10px rgba(0, 0, 0, 0.04)",brushColor:"rgba(255, 255, 255, 0)"};case"techDark":return{background:p||"#1f2937",foreground:"#f9fafb",borderColor:"#374151",shadow:"0 4px 20px rgba(0, 0, 0, 0.3)",brushColor:"rgba(255, 255, 255, 0)",glow:"0 0 15px rgba(139, 92, 246, 0.3)"};case"glass":return{background:p||"rgba(15, 23, 42, 0.3)",foreground:"#ffffff",borderColor:"rgba(255, 255, 255, 0.1)",shadow:"0 8px 32px rgba(0, 0, 0, 0.1)",brushColor:"rgba(255, 255, 255, 0)",blur:"8px"};case"neumorphic":return{background:p||"#e0e5ec",foreground:"#333333",borderColor:"transparent",shadow:"8px 8px 16px #bebebe, -8px -8px 16px #ffffff",shadowInset:"inset 5px 5px 10px #bebebe, inset -5px -5px 10px #ffffff",brushColor:"rgba(255, 255, 255, 0)"};case"glow":return{background:p||"#111827",foreground:"#ffffff",borderColor:"rgba(59, 130, 246, 0.3)",shadow:"0 0 15px rgba(59, 130, 246, 0.3), 0 0 30px rgba(59, 130, 246, 0.2)",brushColor:"rgba(255, 255, 255, 0)"};default:return t}},T=t=>{switch(v){case"prize":return{...t,background:p||(i==="techDark"?"#6d28d9":i==="enterprise"?"#3b82f6":i==="glass"?"rgba(139, 92, 246, 0.4)":i==="neumorphic"?"#dee4ec":"#4f46e5"),pattern:"radial-gradient(circle at center, transparent 0%, transparent 5%, rgba(255, 255, 255, 0.1) 5.1%, rgba(255, 255, 255, 0.2) 10%, transparent 10.1%)",patternSize:"20px 20px"};case"ticket":return{...t,pattern:"repeating-linear-gradient(45deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.1) 10px, rgba(255, 255, 255, 0.2) 10px, rgba(255, 255, 255, 0.2) 20px)"};case"coupon":return{...t,pattern:"repeating-radial-gradient(circle at 50% 50%, rgba(255, 255, 255, 0), rgba(255, 255, 255, 0) 15px, rgba(255, 255, 255, 0.1) 15px, rgba(255, 255, 255, 0.1) 30px)"};default:return t}};l.useEffect(()=>{const t=k.current;if(!t)return;t.width=s,t.height=a;const e=t.getContext("2d");if(!e)return;W(e);const o=j(),b=T(o);if(e.fillStyle=b.background,e.fillRect(0,0,s,a),b.pattern){e.save();const n=document.createElement("canvas"),c=n.getContext("2d");if(!c){e.restore();return}n.width=40,n.height=40;const f=c.createLinearGradient(0,0,40,40);f.addColorStop(0,"rgba(255, 255, 255, 0.1)"),f.addColorStop(1,"rgba(255, 255, 255, 0.2)"),c.fillStyle=f,c.fillRect(0,0,40,40);const d=e.createPattern(n,"repeat");d&&(e.fillStyle=d,e.fillRect(0,0,s,a)),e.restore()}if(g){const n=new Image;n.onload=()=>{e&&e.drawImage(n,0,0,s,a)},n.src=g}if(v==="ticket")e.strokeStyle="rgba(255, 255, 255, 0.3)",e.setLineDash([5,5]),e.beginPath(),e.moveTo(0,15),e.lineTo(s,15),e.stroke(),e.beginPath(),e.moveTo(0,a-15),e.lineTo(s,a-15),e.stroke();else if(v==="coupon"){e.strokeStyle="rgba(255, 255, 255, 0.3)",e.setLineDash([]);const n=8,c=Math.floor(a/(n*2+4)),f=(a-c*n*2)/(c+1);for(let d=0;d<c;d++){const u=f+d*(f+n*2)+n;e.beginPath(),e.arc(-8/2,u,n,0,Math.PI*2),e.stroke(),e.beginPath(),e.arc(s+n/2,u,n,0,Math.PI*2),e.stroke()}}R&&Y()},[s,a,g,p,R,i,v]),l.useEffect(()=>{const t=k.current;if(!t||E)return;const e=u=>{y.current=!0;const m=N(u);q(m),z(m,m)},o=u=>{if(!y.current)return;const m=N(u);z(O,m),q(m),X()},b=()=>{y.current=!1},n=()=>{y.current=!1},c=u=>{u.preventDefault(),e(u.touches[0])},f=u=>{u.preventDefault(),o(u.touches[0])},d=u=>{u.preventDefault(),b()};return t.addEventListener("mousedown",e),t.addEventListener("mousemove",o),t.addEventListener("mouseup",b),t.addEventListener("mouseout",n),t.addEventListener("touchstart",c),t.addEventListener("touchmove",f),t.addEventListener("touchend",d),()=>{t.removeEventListener("mousedown",e),t.removeEventListener("mousemove",o),t.removeEventListener("mouseup",b),t.removeEventListener("mouseout",n),t.removeEventListener("touchstart",c),t.removeEventListener("touchmove",f),t.removeEventListener("touchend",d)}},[E,O]),l.useEffect(()=>{M>=D&&!C&&(L(!0),x&&x())},[M,D,C,x]);const N=t=>{const e=k.current;if(!e)return{x:0,y:0};const o=e.getBoundingClientRect();return{x:t.clientX-o.left,y:t.clientY-o.top}},z=(t,e)=>{!r||!t||!e||(r.globalCompositeOperation="destination-out",r.strokeStyle="rgba(255, 255, 255, 1)",r.lineWidth=_,r.lineCap="round",r.lineJoin="round",r.beginPath(),r.moveTo(t.x,t.y),r.lineTo(e.x,e.y),r.stroke())},X=()=>{if(!r)return;const e=r.getImageData(0,0,s,a).data;let o=0;for(let c=3;c<e.length;c+=4)e[c]===0&&o++;const b=s*a,n=o/b*100;P(n)},Y=l.useCallback(()=>{r&&(r.globalCompositeOperation="destination-out",r.fillRect(0,0,s,a),L(!0),P(100),x&&x())},[r,s,a,x]);l.useCallback(()=>{if(!r)return;const t=j(),e=T(t);if(r.globalCompositeOperation="source-over",r.fillStyle=e.background,r.fillRect(0,0,s,a),g){const o=new Image;o.onload=()=>{r&&r.drawImage(o,0,0,s,a)},o.src=g}L(!1),P(0)},[r,s,a,g,i,v]);const H=j(),S=T(H);return h.jsxRuntimeExports.jsxs("div",{ref:V,className:$.cn("relative rounded-lg overflow-hidden",F),style:{width:s,height:a,borderRadius:"0.5rem",border:`1px solid ${S.borderColor}`,boxShadow:S.shadow,...S.blur?{backdropFilter:`blur(${S.blur})`}:{}},...J,children:[h.jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-0 p-4",style:{color:S.foreground,background:i==="glass"?"rgba(255, 255, 255, 0.1)":i==="techDark"?"#111827":i==="neumorphic"?"#e0e5ec":i==="glow"?"#030712":"#ffffff"},children:w?h.jsxRuntimeExports.jsx("img",{src:w,alt:"Revealed content",className:"max-w-full max-h-full object-contain"}):h.jsxRuntimeExports.jsx("div",{className:"text-center",children:B})}),h.jsxRuntimeExports.jsx("canvas",{ref:k,className:$.cn("absolute inset-0 cursor-pointer z-10",{"cursor-not-allowed":E}),style:{opacity:C&&R?0:1,transition:"opacity 0.5s ease-in-out"}}),!1]})};exports.ScratchCard=I;exports.default=I;
//# sourceMappingURL=index.cjs9.js.map
