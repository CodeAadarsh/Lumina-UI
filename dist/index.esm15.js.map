{"version":3,"file":"index.esm15.js","sources":["../src/components/ui/HoverCard3D.tsx"],"sourcesContent":["import React, { forwardRef, useState, useRef, useEffect, memo, CSSProperties, MouseEvent } from 'react';\nimport { cva, VariantProps } from 'class-variance-authority';\nimport { ThemeProvider, useTheme } from '../../providers/ThemeProvider';\nimport { cn } from '../../utils/cn';\nimport { ThemeName } from '../../providers/ThemeProvider';\n\n// Theme types\nexport type HoverCardTheme = 'enterprise' | 'techDark' | 'glass';\nexport type HoverCardSize = 'sm' | 'md' | 'lg';\nexport type HoverCardIntensity = 'subtle' | 'medium' | 'strong';\nexport type HoverCardEffect = 'glow' | 'shimmer' | 'lift' | 'none';\n\n// Define the variants with class-variance-authority\nconst hoverCard3DVariants = cva(\n  // Base styles for all HoverCard3D components\n  \"relative overflow-hidden transition-all duration-300 perspective-1000 transform-gpu\",\n  {\n    variants: {\n      // Theme variants\n      theme: {\n        enterprise: \"bg-background-primary border border-border shadow-md rounded-lg\",\n        techDark: \"bg-background-primary border border-transparent gradient-border-1 shadow-lg rounded-xl\",\n        glass: \"glass-effect border border-border backdrop-blur-md rounded-xl\",\n      } as const,\n      // Size variants\n      size: {\n        sm: \"p-4 max-w-sm\",\n        md: \"p-6 max-w-md\",\n        lg: \"p-8 max-w-lg\",\n      } as const,\n      // Intensity of the 3D effect\n      intensity: {\n        subtle: \"\", // CSS variables will control the intensity\n        medium: \"\",\n        strong: \"\",\n      } as const,\n      // Additional hover effects\n      hoverEffect: {\n        glow: \"\",\n        shimmer: \"overflow-hidden\",\n        lift: \"\",\n        none: \"\",\n      } as const,\n    },\n    // Compound variants for specific combinations\n    compoundVariants: [\n      // Enterprise theme specifics\n      {\n        theme: \"enterprise\",\n        hoverEffect: \"glow\",\n        className: \"hover:shadow-lg transition-shadow\",\n      },\n      // Tech Dark theme specifics\n      {\n        theme: \"techDark\",\n        hoverEffect: \"glow\",\n        className: \"hover:shadow-blue-glow transition-all\",\n      },\n      {\n        theme: \"techDark\",\n        hoverEffect: \"shimmer\",\n        className: \"before:absolute before:inset-0 before:bg-gradient-to-r before:from-transparent before:via-white/10 before:to-transparent before:translate-x-[-100%] hover:before:animate-shimmer\",\n      },\n      // Glass theme specifics\n      {\n        theme: \"glass\",\n        hoverEffect: \"glow\",\n        className: \"hover:shadow-white-glow transition-all border-opacity-30\",\n      },\n    ],\n    // Default variant values\n    defaultVariants: {\n      theme: \"enterprise\",\n      size: \"md\",\n      intensity: \"medium\",\n      hoverEffect: \"none\",\n    },\n  }\n);\n\n// Extract variant props type from hoverCard3DVariants\nexport type HoverCard3DVariantProps = VariantProps<typeof hoverCard3DVariants>;\n\n// Interface for safety theme hook result\ninterface SafeThemeResult {\n  theme: ThemeName;\n  [key: string]: any;\n}\n\n// Safe version of useTheme that provides a default if not in context\nconst useSafeTheme = (): SafeThemeResult => {\n  try {\n    // Try to use the theme context\n    return useTheme();\n  } catch (error) {\n    // If context is not available, return a default theme object\n    console.warn('ThemeProvider not found, using default theme');\n    return { theme: 'enterprise' };\n  }\n};\n\n// Type definitions for intensity values\ninterface IntensityValues {\n  maxRotation: number;\n  perspective: number;\n}\n\n// Interface for glare styling\ninterface GlareStyle extends CSSProperties {\n  position: 'absolute';\n  top: 0;\n  left: 0;\n  width: '100%';\n  height: '100%';\n  pointerEvents: 'none';\n  background: string;\n  transform: string;\n  opacity: number;\n  transition: string;\n}\n\n// HoverCard3D Props interface\nexport interface HoverCard3DProps extends React.HTMLAttributes<HTMLDivElement>, \n  Omit<HoverCard3DVariantProps, 'theme'> {\n  /** Theme to use for the card */\n  theme?: HoverCardTheme;\n  /** Size variant of the card */\n  size?: HoverCardSize;\n  /** Intensity of the 3D effect */\n  intensity?: HoverCardIntensity;\n  /** Additional hover effect for the card */\n  hoverEffect?: HoverCardEffect;\n  /** Whether to enable the glare effect */\n  glareEnabled?: boolean;\n  /** Whether to reverse the rotation direction */\n  rotateReverse?: boolean;\n  /** Opacity of the glare effect (0-1) */\n  glareOpacity?: number;\n  /** Color of the glare (RGB format) */\n  glareColor?: string;\n  /** Maximum rotation in degrees */\n  maxRotation?: number;\n  /** Perspective value in pixels */\n  perspective?: number;\n  /** React children */\n  children: React.ReactNode;\n  /** Additional class names */\n  className?: string;\n}\n\n// HoverCard3D Component with React.memo for optimization\nconst HoverCard3D = memo(forwardRef<HTMLDivElement, HoverCard3DProps>(({\n  children,\n  className,\n  theme: themeProp,\n  size,\n  intensity,\n  hoverEffect,\n  glareEnabled = true,\n  rotateReverse = false,\n  glareOpacity = 0.1,\n  glareColor = \"255, 255, 255\",\n  maxRotation = 20, // Maximum rotation in degrees\n  perspective = 1000, // Perspective value\n  ...props\n}, ref) => {\n  // Get the current theme from context (safely)\n  const { theme: contextTheme } = useSafeTheme();\n  \n  // Use prop theme or fall back to context or default\n  const activeTheme = (themeProp || contextTheme || 'enterprise') as HoverCardTheme;\n  \n  // State for tracking mouse position\n  const [rotateX, setRotateX] = useState<number>(0);\n  const [rotateY, setRotateY] = useState<number>(0);\n  const [posX, setPosX] = useState<number>(50);\n  const [posY, setPosY] = useState<number>(50);\n  const [isHovering, setIsHovering] = useState<boolean>(false);\n  \n  // References\n  const cardRef = useRef<HTMLDivElement | null>(null);\n  const glareRef = useRef<HTMLDivElement | null>(null);\n  \n  // Set intensity values based on the intensity prop\n  const getIntensityValues = (): IntensityValues => {\n    switch (intensity) {\n      case 'subtle':\n        return { maxRotation: maxRotation * 0.5, perspective: perspective * 1.2 };\n      case 'medium':\n        return { maxRotation, perspective };\n      case 'strong':\n        return { maxRotation: maxRotation * 1.5, perspective: perspective * 0.8 };\n      default:\n        return { maxRotation, perspective };\n    }\n  };\n  \n  const { maxRotation: actualMaxRotation, perspective: actualPerspective } = getIntensityValues();\n  \n  // Handle mouse movement over the card\n  const handleMouseMove = (e: MouseEvent<HTMLDivElement>): void => {\n    if (!cardRef.current) return;\n    \n    const rect = cardRef.current.getBoundingClientRect();\n    const centerX = rect.left + rect.width / 2;\n    const centerY = rect.top + rect.height / 2;\n    \n    // Calculate normalized position (-1 to 1)\n    const normalizedX = (e.clientX - centerX) / (rect.width / 2);\n    const normalizedY = (e.clientY - centerY) / (rect.height / 2);\n    \n    // Apply rotation (optionally reversed)\n    const directionMod = rotateReverse ? -1 : 1;\n    const rotX = normalizedY * actualMaxRotation * directionMod;\n    const rotY = normalizedX * -actualMaxRotation * directionMod;\n    \n    // Update state for rotation\n    setRotateX(rotX);\n    setRotateY(rotY);\n    \n    // Update glare position if enabled\n    if (glareEnabled && glareRef.current) {\n      const glareX = (normalizedX + 1) * 50; // Convert to percentage (0-100)\n      const glareY = (normalizedY + 1) * 50;\n      setPosX(glareX);\n      setPosY(glareY);\n    }\n  };\n  \n  // Handle mouse enter/leave\n  const handleMouseEnter = (): void => setIsHovering(true);\n  const handleMouseLeave = (): void => {\n    setIsHovering(false);\n    setRotateX(0);\n    setRotateY(0);\n  };\n  \n  // Generate styles for the card and glare\n  const cardStyle: CSSProperties = {\n    transform: isHovering ? `perspective(${actualPerspective}px) rotateX(${rotateX}deg) rotateY(${rotateY}deg)` : '',\n    transition: isHovering ? 'transform 0.1s ease' : 'transform 0.5s ease-out',\n  };\n  \n  const glareStyle: GlareStyle = {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    width: '100%',\n    height: '100%',\n    pointerEvents: 'none',\n    background: `radial-gradient(circle at ${posX}% ${posY}%, rgba(${glareColor}, ${glareOpacity}), transparent)`,\n    transform: `translateZ(1px)`,\n    opacity: isHovering ? 1 : 0,\n    transition: 'opacity 0.5s ease-out',\n  };\n  \n  // Get appropriate theme-based classes\n  const classes = hoverCard3DVariants({\n    theme: activeTheme,\n    size,\n    intensity,\n    hoverEffect,\n    className,\n  });\n  \n  return (\n    <div\n      ref={(node) => {\n        // Handle both the forwarded ref and the internal ref\n        if (ref) {\n          if (typeof ref === 'function') ref(node);\n          else if (ref.current !== undefined) ref.current = node;\n        }\n        cardRef.current = node;\n      }}\n      className={cn(classes)}\n      style={cardStyle}\n      onMouseMove={handleMouseMove}\n      onMouseEnter={handleMouseEnter}\n      onMouseLeave={handleMouseLeave}\n      {...props}\n    >\n      {children}\n      {glareEnabled && <div ref={glareRef} style={glareStyle} />}\n    </div>\n  );\n}));\n\n// Display name for debugging\nHoverCard3D.displayName = 'HoverCard3D';\n\n// Interface for the themed version\nexport interface HoverCard3DWithThemeProps extends HoverCard3DProps {\n  theme?: HoverCardTheme;\n}\n\n// Wrapped component with ThemeProvider for standalone usage\nconst HoverCard3DWithTheme = memo(forwardRef<HTMLDivElement, HoverCard3DWithThemeProps>(({\n  theme = 'enterprise',\n  children,\n  ...props\n}, ref) => {\n  // Check if we're already within a ThemeProvider\n  let isInsideThemeProvider = false;\n  try {\n    useTheme();\n    isInsideThemeProvider = true;\n  } catch (error) {\n    isInsideThemeProvider = false;\n  }\n\n  // If already in a ThemeProvider, just render the component\n  if (isInsideThemeProvider) {\n    return <HoverCard3D ref={ref} theme={theme} {...props}>{children}</HoverCard3D>;\n  }\n\n  // Otherwise, wrap it in a ThemeProvider\n  return (\n    <ThemeProvider theme={theme}>\n      <HoverCard3D ref={ref} theme={theme} {...props}>{children}</HoverCard3D>\n    </ThemeProvider>\n  );\n}));\n\nHoverCard3DWithTheme.displayName = 'HoverCard3DWithTheme';\n\nexport { HoverCard3D, HoverCard3DWithTheme, hoverCard3DVariants };"],"names":["hoverCard3DVariants","cva","useSafeTheme","useTheme","HoverCard3D","memo","forwardRef","children","className","themeProp","size","intensity","hoverEffect","glareEnabled","rotateReverse","glareOpacity","glareColor","maxRotation","perspective","props","ref","contextTheme","activeTheme","rotateX","setRotateX","useState","rotateY","setRotateY","posX","setPosX","posY","setPosY","isHovering","setIsHovering","cardRef","useRef","glareRef","getIntensityValues","actualMaxRotation","actualPerspective","handleMouseMove","e","rect","centerX","centerY","normalizedX","normalizedY","directionMod","rotX","rotY","glareX","glareY","handleMouseEnter","handleMouseLeave","cardStyle","glareStyle","classes","jsxs","node","cn","jsx","HoverCard3DWithTheme","theme","isInsideThemeProvider","ThemeProvider"],"mappings":"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"}